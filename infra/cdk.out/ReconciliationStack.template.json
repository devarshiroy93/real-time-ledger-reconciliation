{
 "Resources": {
  "CustomerLedger2929641E": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "txId",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "txId",
      "KeyType": "HASH"
     }
    ],
    "StreamSpecification": {
     "StreamViewType": "NEW_AND_OLD_IMAGES"
    },
    "TableName": "ReconStack-CustomerLedger"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/CustomerLedger/Resource"
   }
  },
  "ProcessorLedgerA7265C57": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "txId",
      "AttributeType": "S"
     },
     {
      "AttributeName": "timestamp",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "txId",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "timestamp",
      "KeyType": "RANGE"
     }
    ],
    "StreamSpecification": {
     "StreamViewType": "NEW_AND_OLD_IMAGES"
    },
    "TableName": "ReconStack-ProcessorLedger"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ProcessorLedger/Resource"
   }
  },
  "CoreLedger388841CB": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "txId",
      "AttributeType": "S"
     },
     {
      "AttributeName": "timestamp",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "txId",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "timestamp",
      "KeyType": "RANGE"
     }
    ],
    "StreamSpecification": {
     "StreamViewType": "NEW_AND_OLD_IMAGES"
    },
    "TableName": "ReconStack-CoreLedger"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/CoreLedger/Resource"
   }
  },
  "ReconciliationFindings2A38872C": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "txId",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "txId",
      "KeyType": "HASH"
     }
    ],
    "TableName": "ReconStack-ReconciliationFindingsV2"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconciliationFindings/Resource"
   }
  },
  "DailySummary204585B1": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "date",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "date",
      "KeyType": "HASH"
     }
    ],
    "TableName": "ReconStack-DailySummary"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/DailySummary/Resource"
   }
  },
  "ReconciliationAuditB69C1A5C": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "txId",
      "AttributeType": "S"
     },
     {
      "AttributeName": "eventTimestamp",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "txId",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "eventTimestamp",
      "KeyType": "RANGE"
     }
    ],
    "TableName": "ReconStack-ReconciliationAudit"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconciliationAudit/Resource"
   }
  },
  "ReconStackSubmitTransactionLambdaServiceRole34CF690E": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconStackSubmitTransactionLambda/ServiceRole/Resource"
   }
  },
  "ReconStackSubmitTransactionLambdaServiceRoleDefaultPolicyA76CE427": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "CustomerLedger2929641E",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ReconStackSubmitTransactionLambdaServiceRoleDefaultPolicyA76CE427",
    "Roles": [
     {
      "Ref": "ReconStackSubmitTransactionLambdaServiceRole34CF690E"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconStackSubmitTransactionLambda/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ReconStackSubmitTransactionLambda5306AEBB": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-851725582337-us-east-1",
     "S3Key": "841aaec81a2c9150a01b67aeca66095e06b1a90c4a38cdd4fccf88b8c807e922.zip"
    },
    "Environment": {
     "Variables": {
      "CUSTOMER_LEDGER_TABLE": {
       "Ref": "CustomerLedger2929641E"
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "ReconStackSubmitTransactionLambdaServiceRole34CF690E",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x"
   },
   "DependsOn": [
    "ReconStackSubmitTransactionLambdaServiceRoleDefaultPolicyA76CE427",
    "ReconStackSubmitTransactionLambdaServiceRole34CF690E"
   ],
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconStackSubmitTransactionLambda/Resource",
    "aws:asset:path": "asset.841aaec81a2c9150a01b67aeca66095e06b1a90c4a38cdd4fccf88b8c807e922",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ReconciliationApiE3EE3D35": {
   "Type": "AWS::ApiGateway::RestApi",
   "Properties": {
    "Description": "APIs for ledger reconciliation demo",
    "Name": "Reconciliation Service"
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconciliationApi/Resource"
   }
  },
  "ReconciliationApiDeployment33DDF882b067519ae80933feb8b9176efd9d0f63": {
   "Type": "AWS::ApiGateway::Deployment",
   "Properties": {
    "Description": "APIs for ledger reconciliation demo",
    "RestApiId": {
     "Ref": "ReconciliationApiE3EE3D35"
    }
   },
   "DependsOn": [
    "ReconciliationApisimulatecorePOST8B5C1163",
    "ReconciliationApisimulatecoreB6492946",
    "ReconciliationApisimulateprocessorPOSTCF0CFB8A",
    "ReconciliationApisimulateprocessor82718A7C",
    "ReconciliationApisimulateE8AD0488",
    "ReconciliationApitransactionPOSTCCB9112E",
    "ReconciliationApitransactionD7DDDA16"
   ],
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconciliationApi/Deployment/Resource"
   }
  },
  "ReconciliationApiDeploymentStageprod14928DA3": {
   "Type": "AWS::ApiGateway::Stage",
   "Properties": {
    "DeploymentId": {
     "Ref": "ReconciliationApiDeployment33DDF882b067519ae80933feb8b9176efd9d0f63"
    },
    "RestApiId": {
     "Ref": "ReconciliationApiE3EE3D35"
    },
    "StageName": "prod"
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconciliationApi/DeploymentStage.prod/Resource"
   }
  },
  "ReconciliationApitransactionD7DDDA16": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "ReconciliationApiE3EE3D35",
      "RootResourceId"
     ]
    },
    "PathPart": "transaction",
    "RestApiId": {
     "Ref": "ReconciliationApiE3EE3D35"
    }
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconciliationApi/Default/transaction/Resource"
   }
  },
  "ReconciliationApitransactionPOSTApiPermissionReconciliationStackReconciliationApiF33D9560POSTtransaction0D0E78C1": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ReconStackSubmitTransactionLambda5306AEBB",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:851725582337:",
       {
        "Ref": "ReconciliationApiE3EE3D35"
       },
       "/",
       {
        "Ref": "ReconciliationApiDeploymentStageprod14928DA3"
       },
       "/POST/transaction"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconciliationApi/Default/transaction/POST/ApiPermission.ReconciliationStackReconciliationApiF33D9560.POST..transaction"
   }
  },
  "ReconciliationApitransactionPOSTApiPermissionTestReconciliationStackReconciliationApiF33D9560POSTtransaction361628E9": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ReconStackSubmitTransactionLambda5306AEBB",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:851725582337:",
       {
        "Ref": "ReconciliationApiE3EE3D35"
       },
       "/test-invoke-stage/POST/transaction"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconciliationApi/Default/transaction/POST/ApiPermission.Test.ReconciliationStackReconciliationApiF33D9560.POST..transaction"
   }
  },
  "ReconciliationApitransactionPOSTCCB9112E": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ReconStackSubmitTransactionLambda5306AEBB",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "ReconciliationApitransactionD7DDDA16"
    },
    "RestApiId": {
     "Ref": "ReconciliationApiE3EE3D35"
    }
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconciliationApi/Default/transaction/POST/Resource"
   }
  },
  "ReconciliationApisimulateE8AD0488": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "ReconciliationApiE3EE3D35",
      "RootResourceId"
     ]
    },
    "PathPart": "simulate",
    "RestApiId": {
     "Ref": "ReconciliationApiE3EE3D35"
    }
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconciliationApi/Default/simulate/Resource"
   }
  },
  "ReconciliationApisimulateprocessor82718A7C": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ReconciliationApisimulateE8AD0488"
    },
    "PathPart": "processor",
    "RestApiId": {
     "Ref": "ReconciliationApiE3EE3D35"
    }
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconciliationApi/Default/simulate/processor/Resource"
   }
  },
  "ReconciliationApisimulateprocessorPOSTApiPermissionReconciliationStackReconciliationApiF33D9560POSTsimulateprocessorD9EB0260": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ReconStackProcessorSimulatorLambdaA2E49CD7",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:851725582337:",
       {
        "Ref": "ReconciliationApiE3EE3D35"
       },
       "/",
       {
        "Ref": "ReconciliationApiDeploymentStageprod14928DA3"
       },
       "/POST/simulate/processor"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconciliationApi/Default/simulate/processor/POST/ApiPermission.ReconciliationStackReconciliationApiF33D9560.POST..simulate.processor"
   }
  },
  "ReconciliationApisimulateprocessorPOSTApiPermissionTestReconciliationStackReconciliationApiF33D9560POSTsimulateprocessorB119B869": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ReconStackProcessorSimulatorLambdaA2E49CD7",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:851725582337:",
       {
        "Ref": "ReconciliationApiE3EE3D35"
       },
       "/test-invoke-stage/POST/simulate/processor"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconciliationApi/Default/simulate/processor/POST/ApiPermission.Test.ReconciliationStackReconciliationApiF33D9560.POST..simulate.processor"
   }
  },
  "ReconciliationApisimulateprocessorPOSTCF0CFB8A": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ReconStackProcessorSimulatorLambdaA2E49CD7",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "ReconciliationApisimulateprocessor82718A7C"
    },
    "RestApiId": {
     "Ref": "ReconciliationApiE3EE3D35"
    }
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconciliationApi/Default/simulate/processor/POST/Resource"
   }
  },
  "ReconciliationApisimulatecoreB6492946": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ReconciliationApisimulateE8AD0488"
    },
    "PathPart": "core",
    "RestApiId": {
     "Ref": "ReconciliationApiE3EE3D35"
    }
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconciliationApi/Default/simulate/core/Resource"
   }
  },
  "ReconciliationApisimulatecorePOSTApiPermissionReconciliationStackReconciliationApiF33D9560POSTsimulatecoreB5CF3D16": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ReconStackCoreSimulatorLambda0D7EF174",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:851725582337:",
       {
        "Ref": "ReconciliationApiE3EE3D35"
       },
       "/",
       {
        "Ref": "ReconciliationApiDeploymentStageprod14928DA3"
       },
       "/POST/simulate/core"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconciliationApi/Default/simulate/core/POST/ApiPermission.ReconciliationStackReconciliationApiF33D9560.POST..simulate.core"
   }
  },
  "ReconciliationApisimulatecorePOSTApiPermissionTestReconciliationStackReconciliationApiF33D9560POSTsimulatecore92C1E4A5": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ReconStackCoreSimulatorLambda0D7EF174",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:851725582337:",
       {
        "Ref": "ReconciliationApiE3EE3D35"
       },
       "/test-invoke-stage/POST/simulate/core"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconciliationApi/Default/simulate/core/POST/ApiPermission.Test.ReconciliationStackReconciliationApiF33D9560.POST..simulate.core"
   }
  },
  "ReconciliationApisimulatecorePOST8B5C1163": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ReconStackCoreSimulatorLambda0D7EF174",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "ReconciliationApisimulatecoreB6492946"
    },
    "RestApiId": {
     "Ref": "ReconciliationApiE3EE3D35"
    }
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconciliationApi/Default/simulate/core/POST/Resource"
   }
  },
  "ReconStackProcessorSimulatorLambdaServiceRole2135A531": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconStackProcessorSimulatorLambda/ServiceRole/Resource"
   }
  },
  "ReconStackProcessorSimulatorLambdaServiceRoleDefaultPolicyF5133C0F": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "ProcessorLedgerA7265C57",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ReconStackProcessorSimulatorLambdaServiceRoleDefaultPolicyF5133C0F",
    "Roles": [
     {
      "Ref": "ReconStackProcessorSimulatorLambdaServiceRole2135A531"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconStackProcessorSimulatorLambda/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ReconStackProcessorSimulatorLambdaA2E49CD7": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-851725582337-us-east-1",
     "S3Key": "ad2128f5d776b467342b11f4e563d07084e04907714efd3f88133ead3e03a3c7.zip"
    },
    "Environment": {
     "Variables": {
      "PROCESSOR_LEDGER_TABLE": {
       "Ref": "ProcessorLedgerA7265C57"
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "ReconStackProcessorSimulatorLambdaServiceRole2135A531",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x"
   },
   "DependsOn": [
    "ReconStackProcessorSimulatorLambdaServiceRoleDefaultPolicyF5133C0F",
    "ReconStackProcessorSimulatorLambdaServiceRole2135A531"
   ],
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconStackProcessorSimulatorLambda/Resource",
    "aws:asset:path": "asset.ad2128f5d776b467342b11f4e563d07084e04907714efd3f88133ead3e03a3c7",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ReconStackCoreSimulatorLambdaServiceRoleF051F2C3": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconStackCoreSimulatorLambda/ServiceRole/Resource"
   }
  },
  "ReconStackCoreSimulatorLambdaServiceRoleDefaultPolicyD4B41E04": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "CoreLedger388841CB",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ReconStackCoreSimulatorLambdaServiceRoleDefaultPolicyD4B41E04",
    "Roles": [
     {
      "Ref": "ReconStackCoreSimulatorLambdaServiceRoleF051F2C3"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconStackCoreSimulatorLambda/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ReconStackCoreSimulatorLambda0D7EF174": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-851725582337-us-east-1",
     "S3Key": "0853cd69dc96c13c6841bdc2eedaf58b67fc498b6e63bc2fce56b60478995214.zip"
    },
    "Environment": {
     "Variables": {
      "CORE_LEDGER_TABLE": {
       "Ref": "CoreLedger388841CB"
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "ReconStackCoreSimulatorLambdaServiceRoleF051F2C3",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x"
   },
   "DependsOn": [
    "ReconStackCoreSimulatorLambdaServiceRoleDefaultPolicyD4B41E04",
    "ReconStackCoreSimulatorLambdaServiceRoleF051F2C3"
   ],
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconStackCoreSimulatorLambda/Resource",
    "aws:asset:path": "asset.0853cd69dc96c13c6841bdc2eedaf58b67fc498b6e63bc2fce56b60478995214",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ReconStackReconciliationEngineLambdaServiceRole7C4D03F5": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconStackReconciliationEngineLambda/ServiceRole/Resource"
   }
  },
  "ReconStackReconciliationEngineLambdaServiceRoleDefaultPolicy7942E3D1": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "CustomerLedger2929641E",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "ReconciliationFindings2A38872C",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "CoreLedger388841CB",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "ProcessorLedgerA7265C57",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "ReconciliationAuditB69C1A5C",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": "dynamodb:ListStreams",
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "dynamodb:DescribeStream",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "CoreLedger388841CB",
          "StreamArn"
         ]
        },
        {
         "Fn::GetAtt": [
          "CustomerLedger2929641E",
          "StreamArn"
         ]
        },
        {
         "Fn::GetAtt": [
          "ProcessorLedgerA7265C57",
          "StreamArn"
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ReconStackReconciliationEngineLambdaServiceRoleDefaultPolicy7942E3D1",
    "Roles": [
     {
      "Ref": "ReconStackReconciliationEngineLambdaServiceRole7C4D03F5"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconStackReconciliationEngineLambda/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ReconStackReconciliationEngineLambda214D7B33": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-851725582337-us-east-1",
     "S3Key": "931a6bcd8421308335f2ed0f538751bcb80679aee3ff0a91388abf1ce70705e2.zip"
    },
    "Environment": {
     "Variables": {
      "CUSTOMER_LEDGER_TABLE": {
       "Ref": "CustomerLedger2929641E"
      },
      "PROCESSOR_LEDGER_TABLE": {
       "Ref": "ProcessorLedgerA7265C57"
      },
      "CORE_LEDGER_TABLE": {
       "Ref": "CoreLedger388841CB"
      },
      "FINDINGS_TABLE": {
       "Ref": "ReconciliationFindings2A38872C"
      },
      "AUDIT_TABLE": {
       "Ref": "ReconciliationAuditB69C1A5C"
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "ReconStackReconciliationEngineLambdaServiceRole7C4D03F5",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x"
   },
   "DependsOn": [
    "ReconStackReconciliationEngineLambdaServiceRoleDefaultPolicy7942E3D1",
    "ReconStackReconciliationEngineLambdaServiceRole7C4D03F5"
   ],
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconStackReconciliationEngineLambda/Resource",
    "aws:asset:path": "asset.931a6bcd8421308335f2ed0f538751bcb80679aee3ff0a91388abf1ce70705e2",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ReconStackReconciliationEngineLambdaDynamoDBEventSourceReconciliationStackCustomerLedger7A5CE935172B6222": {
   "Type": "AWS::Lambda::EventSourceMapping",
   "Properties": {
    "BatchSize": 100,
    "EventSourceArn": {
     "Fn::GetAtt": [
      "CustomerLedger2929641E",
      "StreamArn"
     ]
    },
    "FunctionName": {
     "Ref": "ReconStackReconciliationEngineLambda214D7B33"
    },
    "StartingPosition": "LATEST"
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconStackReconciliationEngineLambda/DynamoDBEventSource:ReconciliationStackCustomerLedger7A5CE935/Resource"
   }
  },
  "ReconStackReconciliationEngineLambdaDynamoDBEventSourceReconciliationStackProcessorLedgerD2B953BDF1927439": {
   "Type": "AWS::Lambda::EventSourceMapping",
   "Properties": {
    "BatchSize": 100,
    "EventSourceArn": {
     "Fn::GetAtt": [
      "ProcessorLedgerA7265C57",
      "StreamArn"
     ]
    },
    "FunctionName": {
     "Ref": "ReconStackReconciliationEngineLambda214D7B33"
    },
    "StartingPosition": "LATEST"
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconStackReconciliationEngineLambda/DynamoDBEventSource:ReconciliationStackProcessorLedgerD2B953BD/Resource"
   }
  },
  "ReconStackReconciliationEngineLambdaDynamoDBEventSourceReconciliationStackCoreLedgerE9A7734D7E56B797": {
   "Type": "AWS::Lambda::EventSourceMapping",
   "Properties": {
    "BatchSize": 100,
    "EventSourceArn": {
     "Fn::GetAtt": [
      "CoreLedger388841CB",
      "StreamArn"
     ]
    },
    "FunctionName": {
     "Ref": "ReconStackReconciliationEngineLambda214D7B33"
    },
    "StartingPosition": "LATEST"
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/ReconStackReconciliationEngineLambda/DynamoDBEventSource:ReconciliationStackCoreLedgerE9A7734D/Resource"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/2VQTU+DQBD9Lb0vo1A9eGyr3qoGvJMBprh87BJmKCGE/252QW3i6X1k5uXNRBA+PkG4w5GDvKiDRmcwJ4J5rXDkdC4mg60tMpg/MWtInS7Gk0U12GYFpsYWVDG8eXgdTC7aGqWxhTm264LHD9vofHJyZYvifYrMJAwHB4r3cBzymuSITFs8zKeL+U11y9S3mtmplysZSezQ53TGrtOmdAP/3UVhp0sUGnGCOSaWQ6d9r40+U9fYqSUjzr1RiWDpL1hJTOxzfb8fsQWt/EzyZQtnrWxZ/ub8kS5oK/o+SDfI7fqi3DOh4rtrFEH4APe7irUO+sGIbgniFb8BrChqc7MBAAA="
   },
   "Metadata": {
    "aws:cdk:path": "ReconciliationStack/CDKMetadata/Default"
   }
  }
 },
 "Outputs": {
  "ReconciliationApiEndpoint15867AED": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "ReconciliationApiE3EE3D35"
      },
      ".execute-api.us-east-1.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "ReconciliationApiDeploymentStageprod14928DA3"
      },
      "/"
     ]
    ]
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}